<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pa√≠ses del Mundo</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 800px;
      margin: auto;
      background-color: #871;
    }
    .controls {
      margin-bottom: 20px;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    input, select {
      padding: 8px;
      font-size: 1em;
      background-color: #ee9;
      outline: none;
    }
    .pais {
      border: 1px solid #650;
      border-radius: 8px;
      padding: 10px;
      margin: 10px 0;
      display: flex;
      align-items: center;
      gap: 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .pais:hover {
        background-color: #a83; /* un poco m√°s claro que #871 */
    }
    .bandera {
      width: 50px;
    }
    @media screen and (max-width: 600px) {
        body {
            padding: 10px;  /* Menos margen en m√≥viles */
        }

        .controls {
            flex-direction: column;  /* Los controles estar√°n en columna en pantallas peque√±as */
            gap: 15px;
        }

        input, select {
            width: 100%;  /* Los selectores y el input ocupar√°n todo el ancho disponible */
            padding: 10px;  /* Un poco m√°s de espacio para hacerlos m√°s f√°ciles de usar */
            font-size: 1em;  /* Tama√±o de fuente adecuado */
        }

        .pais {
            font-size: 0.95em;  /* Hacemos el texto un poquito m√°s peque√±o */
        }

        .bandera {
            width: 40px;  /* Reducimos un poco el tama√±o de la bandera en pantallas peque√±as */
        }

        h1 {
            font-size: 1.5em;  /* Reducimos el tama√±o del t√≠tulo */
        }
    }
  </style>
</head>

<body>
  <h1>üåç Lista de Pa√≠ses</h1>

  <div class="controls">
    <input type="text" id="buscador" placeholder="Buscar pa√≠s..." />

    <select id="orden">
      <option value="az">Ordenar A-Z</option>
      <option value="za">Ordenar Z-A</option>
    </select>

    <select id="continente">
        <option value="todos">Todos los continentes</option>
        <option value="Africa">√Åfrica</option>
        <option value="Americas">Am√©rica</option>
        <option value="Asia">Asia</option>
        <option value="Europe">Europa</option>
        <option value="Oceania">Ocean√≠a</option>
        <option value="Antarctic">Ant√°rtida</option>
      </select>      
  </div>

  <div id="paises"></div>

  <script>
    const URL_API_RESTCOUNTRIES = 'https://restcountries.com/v3.1/';
    const URL_API_RESTCOUNTRIES_ALL = 'https://restcountries.com/v3.1/all';
    let todosLosPaises = [];

    const contenedor = document.getElementById('paises');
    const buscador = document.getElementById('buscador');
    const orden = document.getElementById('orden');
    const continente = document.getElementById('continente');

    fetch(URL_API_RESTCOUNTRIES_ALL)
      .then(res => res.json())
      .then(data => {
        todosLosPaises = data;
        mostrarPaises();
      })
      .catch(err => {
        contenedor.innerHTML = 'Error al cargar pa√≠ses.';
        console.error(err);
      });

    function mostrarPaises()
    {
        const textoBusqueda = buscador.value.toLowerCase();
        const ordenSeleccionado = orden.value;

        let filtrados = todosLosPaises.filter(p =>
            p.name.common.toLowerCase().includes(textoBusqueda)
        );

        if (continente.value !== 'todos')
        {
            filtrados = filtrados.filter(p => p.region === continente.value);
        }

        filtrados.sort((a, b) => {
            const nombreA = a.name.common.toLowerCase();
            const nombreB = b.name.common.toLowerCase();
            return ordenSeleccionado === 'az'
            ? nombreA.localeCompare(nombreB)
            : nombreB.localeCompare(nombreA);
        });

        contenedor.innerHTML = '';
        
        filtrados.forEach(pais => {
            const div = document.createElement('div');
            div.className = 'pais';

            const idiomas = pais.languages
            ? Object.values(pais.languages).join(', ')
            : 'N/A';

            const detallesHTML = `
            <div class="detalles" style="display: none; margin-top: 10px; font-size: 0.95em;">
                <div>üßë‚Äçü§ù‚Äçüßë <strong>Poblaci√≥n:</strong> ${pais.population.toLocaleString()}</div>
                <div>üó£Ô∏è <strong>Idiomas:</strong> ${idiomas}</div>
            </div>
            `;

            div.innerHTML = `
            <img class="bandera" src="${pais.flags.svg}" alt="Bandera de ${pais.name.common}" />
            <div>
                <strong>${pais.name.common}</strong><br>
                Capital: ${pais.capital ? pais.capital[0] : 'N/A'}<br>
                Regi√≥n: ${pais.region}
                ${detallesHTML}
            </div>
            `;

            // A√±adir evento para mostrar/ocultar detalles
            div.addEventListener('click', () => {
            const detalles = div.querySelector('.detalles');
            detalles.style.display = detalles.style.display === 'none' ? 'block' : 'none';
            });

            contenedor.appendChild(div);
        });
    }

    buscador.addEventListener('input', mostrarPaises);
    orden.addEventListener('change', mostrarPaises);
    continente.addEventListener('change', mostrarPaises);
  </script>
</body>
</html>
